# 🌐 UNIFIED DOMAIN DEPLOYMENT - VOTINGONLINE2025.SITE

## 🎯 **KIẾN TRÚC TÊN MIỀN THỐNG NHẤT**

### **🌍 Domain Structure:**
```
votingonline2025.site (Root Domain)
├── https://votingonline2025.site          → User Interface
├── https://admin.votingonline2025.site    → Admin Panel  
└── https://api.votingonline2025.site      → Backend API
```

---

## ✅ **ĐÃ CẤU HÌNH THỐNG NHẤT:**

### **1️⃣ Frontend Configuration:**
- ✅ **Admin Panel**: Point to `admin.votingonline2025.site`
- ✅ **User Interface**: Point to `votingonline2025.site`
- ✅ **API Endpoints**: Both point to `api.votingonline2025.site`

### **2️⃣ Backend Configuration:**
- ✅ **CORS Origins**: Only `votingonline2025.site` domains
- ✅ **JWT Secrets**: Unified for the domain
- ✅ **Database**: Single PostgreSQL instance

### **3️⃣ Security Benefits:**
- ✅ **No CORS Issues**: Same root domain
- ✅ **Cookie Sharing**: Subdomain cookies work
- ✅ **SSL Wildcard**: `*.votingonline2025.site`
- ✅ **CSP Compliance**: Same-origin policies

---

## 🚀 **VPS DEPLOYMENT COMMANDS:**

### **Step 1: Domain Setup**
```bash
# Add DNS Records (A Records):
votingonline2025.site           → VPS_IP
admin.votingonline2025.site     → VPS_IP
api.votingonline2025.site       → VPS_IP
www.votingonline2025.site       → VPS_IP
```

### **Step 2: Deploy to VPS**
```bash
# Upload and run deployment script
scp vps-deploy-complete.sh root@YOUR_VPS_IP:/root/
ssh root@YOUR_VPS_IP
chmod +x /root/vps-deploy-complete.sh
bash /root/vps-deploy-complete.sh
```

### **Step 3: SSL Certificate**
```bash
# Auto-generated by deployment script
sudo certbot --nginx \
  -d votingonline2025.site \
  -d www.votingonline2025.site \
  -d admin.votingonline2025.site \
  -d api.votingonline2025.site
```

---

## 📊 **MIGRATION PLAN:**

### **🔄 Current State → Target State:**

| Component | Current (Netlify) | Target (VPS) |
|-----------|------------------|--------------|
| **Admin** | `admin-bvote-2025.netlify.app` | `admin.votingonline2025.site` |
| **User** | `user-bvote-2025.netlify.app` | `votingonline2025.site` |
| **API** | `localhost:3000` | `api.votingonline2025.site` |

### **🎯 Migration Benefits:**
- ✅ **Unified Domain**: No cross-origin issues
- ✅ **Professional URLs**: Clean, branded domains
- ✅ **Better SEO**: Single domain authority
- ✅ **Security**: Same-origin policy compliance
- ✅ **Performance**: No CORS preflight requests

---

## 🛠️ **TEMPORARY TESTING:**

### **For Testing Before VPS:**
```bash
# Update local hosts file for testing:
# C:\Windows\System32\drivers\etc\hosts (Windows)
# /etc/hosts (Linux/Mac)

127.0.0.1 votingonline2025.site
127.0.0.1 admin.votingonline2025.site
127.0.0.1 api.votingonline2025.site
```

### **Local Development URLs:**
- User: `http://votingonline2025.site:5174`
- Admin: `http://admin.votingonline2025.site:5173`
- API: `http://api.votingonline2025.site:3000`

---

## 🔧 **NGINX CONFIGURATION:**

The deployment script will automatically create:

```nginx
# User Interface - Main Domain
server {
    listen 443 ssl http2;
    server_name votingonline2025.site www.votingonline2025.site;
    root /home/votingonline2025.site/public_html;
    # ... SSL and security config
}

# Admin Panel - Subdomain
server {
    listen 443 ssl http2;
    server_name admin.votingonline2025.site;
    root /home/votingonline2025.site/admin;
    # ... SSL and security config
}

# Backend API - Subdomain
server {
    listen 443 ssl http2;
    server_name api.votingonline2025.site;
    location / {
        proxy_pass http://localhost:3000;
        # ... proxy config
    }
}
```

---

## 📝 **NEXT STEPS:**

### **Immediate Actions:**
1. ✅ **Configuration Updated**: All configs now point to unified domain
2. 🔄 **Ready for VPS**: Deployment script prepared
3. 📋 **DNS Setup**: Configure DNS records when ready
4. 🚀 **Deploy**: Run VPS deployment script

### **Post-Deployment:**
1. **Test All Features**: Admin → User communication
2. **Monitor Logs**: Check for any domain-related issues
3. **Performance Check**: Verify no CORS delays
4. **Security Audit**: Confirm all security headers

---

## 🎊 **UNIFIED DOMAIN BENEFITS:**

### **🔒 Security:**
- Single SSL certificate covers all subdomains
- No cross-origin vulnerabilities
- Consistent security headers

### **⚡ Performance:**
- No CORS preflight requests
- Faster API calls
- Better caching strategies

### **🎯 Management:**
- Single domain to manage
- Unified analytics
- Simpler deployment process

### **👥 User Experience:**
- Professional, consistent URLs
- Better brand recognition
- Seamless navigation between admin/user

---

**🌟 VOTINGONLINE2025.SITE - UNIFIED DOMAIN ARCHITECTURE READY!**
